{"version":3,"file":"todo.service.js","names":["Object","defineProperty","exports","value","TodoService","todo_model_1","require","onTodoListChanged","savedTodosJson","localStorage","getItem","savedTodos","JSON","parse","todos","map","todo","Todo","prototype","bindTodoListChanged","callback","_commit","setItem","stringify","addTodo","text","newTodo","complete","push","editTodo","id","updatedText","todoIndex","i","length","parseInt","deleteTodo","filter","toggleTodo","todoToUpdate","_i","_a","console","error"],"sources":["../services/todo.service.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TodoService = void 0;\nvar todo_model_1 = require(\"../models/todo.model\"); // Ajusta la ruta seg√∫n tu estructura de archivos\n/**\n * @class Service\n *\n * Manages the data of the application.\n */\nvar TodoService = /** @class */ (function () {\n    function TodoService() {\n        this.onTodoListChanged = null;\n        var savedTodosJson = localStorage.getItem(\"todos\");\n        var savedTodos = savedTodosJson ? JSON.parse(savedTodosJson) : [];\n        this.todos = savedTodos.map(function (todo) { return new todo_model_1.Todo(todo); });\n    }\n    TodoService.prototype.bindTodoListChanged = function (callback) {\n        this.onTodoListChanged = callback;\n    };\n    TodoService.prototype._commit = function () {\n        if (this.onTodoListChanged) {\n            this.onTodoListChanged(this.todos);\n        }\n        localStorage.setItem(\"todos\", JSON.stringify(this.todos));\n    };\n    TodoService.prototype.addTodo = function (text) {\n        var newTodo = new todo_model_1.Todo({ text: text, complete: false });\n        this.todos.push(newTodo);\n        this._commit();\n    };\n    TodoService.prototype.editTodo = function (id, updatedText) {\n        var todoIndex = -1;\n        for (var i = 0; i < this.todos.length; i++) {\n            if (parseInt(this.todos[i].id) === id) { // Convertir id de string a number\n                todoIndex = i;\n                break;\n            }\n        }\n        if (todoIndex !== -1) {\n            this.todos[todoIndex].text = updatedText;\n            this._commit();\n        }\n    };\n    TodoService.prototype.deleteTodo = function (id) {\n        this.todos = this.todos.filter(function (todo) { return parseInt(todo.id) !== id; });\n        this._commit();\n    };\n    TodoService.prototype.toggleTodo = function (id) {\n        var todoToUpdate;\n        for (var _i = 0, _a = this.todos; _i < _a.length; _i++) {\n            var todo = _a[_i];\n            if (parseInt(todo.id) === id) {\n                todoToUpdate = todo;\n                break;\n            }\n        }\n        if (todoToUpdate) {\n            todoToUpdate.complete = !todoToUpdate.complete;\n            this._commit();\n        }\n        else {\n            console.error(\"Todo not found\");\n        }\n    };\n    return TodoService;\n}());\nexports.TodoService = TodoService;\n"],"mappings":"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","ignoreList":[]}