{"version":3,"file":"todo.views.js","names":["Object","defineProperty","exports","value","TodoView","app","getElement","form","createElement","input","type","placeholder","name","submitButton","textContent","append","title","todoList","_temporaryTodoText","_initLocalListeners","prototype","get","enumerable","configurable","_resetInput","tag","className","element","document","classList","add","selector","querySelector","displayTodos","todos","_this","firstChild","removeChild","length","p","forEach","todo","li","id","checkbox","checked","complete","span","contentEditable","strike","text","deleteButton","console","log","addEventListener","event","target","innerText","bindAddTodo","handler","preventDefault","_todoText","bindDeleteTodo","parseInt","parentElement","bindEditTodo","bindToggleTodo","tagName","toLowerCase","getAttribute"],"sources":["../views/todo.views.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TodoView = void 0;\n/**\n * @class View\n *\n * Visual representation of the model.\n */\nvar TodoView = /** @class */ (function () {\n    function TodoView() {\n        this.app = this.getElement(\"#root\");\n        this.form = this.createElement(\"form\");\n        this.input = this.createElement(\"input\");\n        this.input.type = \"text\";\n        this.input.placeholder = \"Add todo\";\n        this.input.name = \"todo\";\n        this.submitButton = this.createElement(\"button\");\n        this.submitButton.textContent = \"Submit\";\n        this.form.append(this.input, this.submitButton);\n        this.title = this.createElement(\"h1\");\n        this.title.textContent = \"Todos\";\n        this.todoList = this.createElement(\"ul\", \"todo-list\");\n        this.app.append(this.title, this.form, this.todoList);\n        this._temporaryTodoText = \"\";\n        this._initLocalListeners();\n    }\n    Object.defineProperty(TodoView.prototype, \"_todoText\", {\n        get: function () {\n            return this.input.value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TodoView.prototype._resetInput = function () {\n        this.input.value = \"\";\n    };\n    TodoView.prototype.createElement = function (tag, className) {\n        var element = document.createElement(tag);\n        if (className)\n            element.classList.add(className);\n        return element;\n    };\n    TodoView.prototype.getElement = function (selector) {\n        var element = document.querySelector(selector);\n        return element;\n    };\n    TodoView.prototype.displayTodos = function (todos) {\n        var _this = this;\n        // Delete all nodes\n        while (this.todoList.firstChild) {\n            this.todoList.removeChild(this.todoList.firstChild);\n        }\n        // Show default message\n        if (todos.length === 0) {\n            var p = this.createElement(\"p\");\n            p.textContent = \"Nothing to do! Add a task?\";\n            this.todoList.append(p);\n        }\n        else {\n            // Create nodes\n            todos.forEach(function (todo) {\n                var li = _this.createElement(\"li\");\n                li.id = todo.id;\n                var checkbox = _this.createElement(\"input\");\n                checkbox.type = \"checkbox\";\n                checkbox.checked = todo.complete;\n                var span = _this.createElement(\"span\");\n                span.contentEditable = \"true\";\n                span.classList.add(\"editable\");\n                if (todo.complete) {\n                    var strike = _this.createElement(\"s\");\n                    strike.textContent = todo.text;\n                    span.append(strike);\n                }\n                else {\n                    span.textContent = todo.text;\n                }\n                var deleteButton = _this.createElement(\"button\", \"delete\");\n                deleteButton.textContent = \"Delete\";\n                li.append(checkbox, span, deleteButton);\n                // Append nodes\n                _this.todoList.append(li);\n            });\n        }\n        // Debugging\n        console.log(todos);\n    };\n    TodoView.prototype._initLocalListeners = function () {\n        var _this = this;\n        this.todoList.addEventListener(\"input\", function (event) {\n            if (event.target.className === \"editable\") {\n                _this._temporaryTodoText = event.target.innerText;\n            }\n        });\n    };\n    TodoView.prototype.bindAddTodo = function (handler) {\n        var _this = this;\n        this.form.addEventListener(\"submit\", function (event) {\n            event.preventDefault();\n            if (_this._todoText) {\n                handler(_this._todoText);\n                _this._resetInput();\n            }\n        });\n    };\n    TodoView.prototype.bindDeleteTodo = function (handler) {\n        this.todoList.addEventListener(\"click\", function (event) {\n            if (event.target.className === \"delete\") {\n                var id = parseInt(event.target.parentElement.id);\n                handler(id);\n            }\n        });\n    };\n    TodoView.prototype.bindEditTodo = function (handler) {\n        var _this = this;\n        this.todoList.addEventListener(\"focusout\", function (event) {\n            if (_this._temporaryTodoText) {\n                var id = parseInt(event.target.parentElement.id);\n                handler(id, _this._temporaryTodoText);\n                _this._temporaryTodoText = \"\";\n            }\n        });\n    };\n    TodoView.prototype.bindToggleTodo = function (handler) {\n        this.todoList.addEventListener(\"change\", function (event) {\n            var target = event.target;\n            if (target.tagName.toLowerCase() === \"input\" && target.getAttribute(\"type\") === \"checkbox\") {\n                var id = parseInt(target.parentElement.id);\n                handler(id);\n            }\n        });\n    };\n    return TodoView;\n}());\nexports.TodoView = TodoView;\n"],"mappings":"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","ignoreList":[]}